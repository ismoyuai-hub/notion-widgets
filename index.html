<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Notion 时间组件</title>

  <style>
    /* =====================
       1. 主题变量（默认 glass）
       ===================== */
    :root {
      --bg: transparent;
      --card-bg: transparent;
      --text: #111;
      --muted: #777;
      --accent: #00a884;
    }

    body.theme-dark {
      --bg: transparent;
      --card-bg: transparent;
      --text: #f5f6f7;
      --muted: #9aa0a6;
      --accent: #00d0a3;
    }

    body.theme-light {
      --bg: transparent;
      --card-bg: transparent;
      --text: #111;
      --muted: #666;
      --accent: #00a884;
    }

    body.theme-glass {
      --bg: transparent;
      --card-bg: rgba(255,255,255,0.06);
      --text: #f5f6f7;
      --muted: #b0b6bb;
      --accent: #00d0a3;
    }

    /* =====================
       2. 基础布局
       ===================== */
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Inter,Roboto;
    }

    body {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 12px;
    }

    .widget {
      width: 100%;
      max-width: 320px;
      padding: 20px;
      border-radius: 14px;
      background: var(--card-bg);
      color: var(--text);
      backdrop-filter: blur(10px);
    }

    /* =====================
       3. 时间显示
       ===================== */
    .date {
      text-align: center;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 8px;
    }

    .time {
      text-align: center;
      font-size: 44px;
      font-weight: 800;
      letter-spacing: -1px;
      margin-bottom: 18px;
    }

    /* =====================
       4. 进度条
       ===================== */
    .row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .label {
      width: 56px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
    }

    .bar {
      flex: 1;
      height: 8px;
      background: rgba(127,127,127,0.2);
      border-radius: 999px;
      overflow: hidden;
    }

    .bar > span {
      display: block;
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg,var(--accent),#00c2ff);
      border-radius: 999px;
      transition: width .6s ease;
    }

    .percent {
      width: 42px;
      font-size: 12px;
      text-align: right;
      color: var(--muted);
      font-weight: 600;
    }

    /* =====================
       5. 底部
       ===================== */
    .footer {
      text-align: center;
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }
  </style>
</head>

<body>
  <div class="widget">
    <div class="date" id="dateText">--</div>
    <div class="time" id="timeText">--:--:--</div>

    <div class="row">
      <div class="label">YEAR</div>
      <div class="bar"><span id="yearBar"></span></div>
      <div class="percent" id="yearPct">--%</div>
    </div>

    <div class="row">
      <div class="label">MONTH</div>
      <div class="bar"><span id="monthBar"></span></div>
      <div class="percent" id="monthPct">--%</div>
    </div>

    <div class="row">
      <div class="label">WEEK</div>
      <div class="bar"><span id="weekBar"></span></div>
      <div class="percent" id="weekPct">--%</div>
    </div>

    <div class="footer" id="footerText">--</div>
  </div>

  <script>
    /* =====================
       1. 主题参数（核心）
       ===================== */
    const params = new URLSearchParams(location.search)
    const theme = params.get('theme') || 'glass'
    document.body.classList.add(`theme-${theme}`)

    /* =====================
       2. 时间逻辑
       ===================== */
    const pad = n => String(n).padStart(2,'0')
    const weekCN = ['周日','周一','周二','周三','周四','周五','周六']

    function dayOfYear(d){
      const start = new Date(d.getFullYear(),0,0)
      return Math.floor((d-start)/(1000*60*60*24))
    }

    function update(){
      const now = new Date()

      // 时间
      document.getElementById('timeText').textContent =
        `${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`

      document.getElementById('dateText').textContent =
        `${now.getFullYear()}-${pad(now.getMonth()+1)}-${pad(now.getDate())} ${weekCN[now.getDay()]}`

      // 年
      const yearDays = ((now.getFullYear()%4===0)&& (now.getFullYear()%100!==0)) ? 366 : 365
      const y = dayOfYear(now)
      const yp = Math.round(y / yearDays * 100)
      yearBar.style.width = yp + '%'
      yearPct.textContent = yp + '%'

      // 月
      const mDays = new Date(now.getFullYear(),now.getMonth()+1,0).getDate()
      const mp = Math.round(now.getDate()/mDays*100)
      monthBar.style.width = mp + '%'
      monthPct.textContent = mp + '%'

      // 周（周一开始）
      const wd = now.getDay() === 0 ? 7 : now.getDay()
      const wp = Math.round(wd/7*100)
      weekBar.style.width = wp + '%'
      weekPct.textContent = wp + '%'

      document.getElementById('footerText').textContent =
        `${y}/${yearDays} · ${now.getDate()}/${mDays} · ${wd}/7`
    }

    update()
    setInterval(update,1000)
  </script>
</body>
</html>
